先讲一下DNS，DNS是域名解析系统，将域名转化为IP地址，当然也可以反向解析，将IP转换为域名。

DNS实际上在维护两个Namespace，一个是域名的Namespace，可以组织为一棵树，我们可以进一步将其划分为不重叠的区域，每个区域有权威域名服务器，保存本区域域名记录。根域名服务器保存了所有顶级区域的权威域名服务器记录。

联网时会分配本地域名服务器，Local DNS Server，dns解析时，向local server发起请求，若缓存中没有，就会向根域名服务器请求，迭代解析

因为80/20 定律，设置缓存机制，和timetolive，提高效率

记录类型

DNSSEC DNS安全扩展，dns设计有安全缺陷，无法验证是否被篡改

DNS服务器收到DNS查询请求后，用散列函数将要回复DNS报文的内容进行散列运算，得到“内容摘要”，使用私匙加密后再附加到DNS报文中；

DNS查询请求者接收到报文后，利用公匙解密收到的“内容摘要”，再利用散列函数计算一次DNS查询请求报文中的“内容摘要”，两者对比；

若相同，就可以确认接收到的DNS信息是正确的DNS响应；若验证失败，则表明这一报文可能是假冒的，或者在传输过程、缓存过程中被篡改了。


资源记录分析

手机Open resolvers，常用域名，测试IPv6情况。目前中国IP资源短缺，IPv4已经耗尽，依靠NAT技术网络地址转换，缓解现状。我国IPv6起步早，目前发展较迟缓。我们希望采用多路径请求解析的方式，分析IPv6现状。根据DNS解析结果中的A记录和4A记录，可以判断是否支持IPv6。

DNSEC是对DNS的安全扩展。目前DNS是网络基础设施，但其十分脆弱，易受攻击，部署DNSSEC可以让我们的解析更加安全。

Resource Record Signature

使用部署了DNSSEC的Open resolver 如 8.8.8.8测试有DNSSEC的域名paypal.com，发现answer section 有 RRSIG记录，根据此可判断Open resolver 是否部署dnssec


DNS解析类型分析
通过DNS解析，可以由域名得到服务器ip地址。但返回的ip可能存在多种情况。前面已经说过，同一个IP可以对应多个域名，同一个域名也可以对应多个IP。比如目前大型网站普遍适应CDN技术，CDN就会依据ldns位置返回距离最近的服务器地址。负载均衡中可采用round robin dns技术，轮询，返回的ip也不相同。这些都是正常的。然而，还存在DNS劫持和缓存中毒等多种情况，我们希望对dns解析数据进行分析，进而实现一个系统，可以告诉用户那些解析结果是正常可信的。

首先是数据的获取

收集了一些Open resolvers地址，和常用域名，采用dig工具，进行解析，得到解析数据。

后期会将log数据整理到数据库中，便于分析处理

如何分辨



